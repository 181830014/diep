<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Login</title>
    <script src="vue.min.js"></script>
    <script src="jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" type="text/css" href="stylesheet.css">
</head>
    <div id="login-page" class="login-page">
        <div class="input-cont">
            <input id="name-box" type="text" maxlength="30" v-on:keyup.13="login()" v-model="nickname" placeholder="input your name" />
            <div id="btn-start" class="btn-start" v-on:click="login()">
                <span>Start !</span>
                <div id="connecting-img" class="connecting-img" v-bind:class="{'show':gameState==1}"></div>
            </div>
        </div>
    </div>
    <script>
        var pageVueData = {
            nickname: '',
            gameState: 0 // 0表示未开始 1表示等待连接 2表示游戏运行中
            // other attrs ...
        }
        var pageVue = new Vue({
            el: '#login-page',
            data: pageVueData,
            methods: {
                login: function () {
                    if (pageVueData.gameState != 0) return;
                    pageVueData.gameState = 1;
                    // TODO:发送 pageVueData.nickname 给服务器
                    // 默认5s后拒绝登录，应移除
                    setTimeout('accessDenied()', "5000");
                }
            }
        });
        // ------------以下是服务器拒绝登入后应触发的过程实例---------------
        function accessDenied() {
            pageVueData.nickname = '';
            pageVueData.gameState = 0;
        }
        // ------------以下是服务器准许登入后应触发的过程实例---------------
        function gameStart(nickname) {
            $('#login-page').remove();
            pageVueData.gameState = 2;
            alert(pageVueData.nickname);
        }
    </script>
</body>
</html>